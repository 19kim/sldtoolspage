var magicCostState;var fullScreenState=false;var isWebView=getUrlVars().mode==="webview"?true:false;window.addEventListener("DOMContentLoaded",function(){var a=document.getElementById("tables");a.innerHTML=unitNameFormatting(a.innerHTML);loadSettings();showMagicCostEvent();addTableEvent();document.getElementById("btnSideMenu").addEventListener("click",kigui.layout.sidemenu.eventMenuOpen);var b=kigui.layout.others.pageCover.getElement();b.addEventListener("click",kigui.layout.sidemenu.eventMenuClose);b.addEventListener("mousewheel",kigui.layout.sidemenu.eventMenuClose);b.addEventListener("touchmove",kigui.layout.sidemenu.eventMenuClose);headerShadowEvent();document.getElementById("swRankColor").addEventListener("change",refleshRankColor);document.getElementById("swDebuff").addEventListener("change",refleshDebuff);document.getElementById("swMagicCost").addEventListener("change",refleshMagicCost);document.getElementById("swPublicHidden").addEventListener("change",refleshPublicHidden);if(isWebView===false){var c=document.getElementById("btnFullScreen");c.addEventListener("click",enableFullScreen);c.addEventListener("click",disableFullScreen);document.addEventListener("webkitfullscreenchange",fullScreenEvent)}else{setWebViewMode()}});function showMagicCostEvent(){var b=document.querySelectorAll("tbody>tr");var a;for(a=0;a<b.length;a++){b[a].addEventListener("click",function(){if(magicCostState===true){hideMagicCost();var c=this.querySelector(".magic_cost");if(!!c){c.classList.add("magic_cost-show")}}})}}function addTableEvent(){var a=document.querySelectorAll("#tables tbody > tr");for(var b=0;b<a.length;b++){a[b].addEventListener("dblclick",function(){this.classList.toggle("bookmark")})}}function refleshRankColor(){var b;var c=document.getElementById("swRankColor");var a=document.querySelectorAll("#tables span");if(c.checked===true){for(b=0;b<a.length;b++){a[b].style.color=""}}else{for(b=0;b<a.length;b++){a[b].style.color="#DCDCDC"}}if(typeof(Storage)!=="undefined"){localStorage.setItem("rankColor",c.checked.toString())}}function refleshDebuff(){var b;var c=document.getElementById("swDebuff");var a=document.getElementsByClassName("debuff");if(c.checked===true){for(b=0;b<a.length;b++){a[b].style.display="block"}}else{for(b=0;b<a.length;b++){a[b].style.display=""}}if(typeof(Storage)!=="undefined"){localStorage.setItem("skillUnit",c.checked.toString())}}function refleshMagicCost(){var a=document.getElementById("swMagicCost");if(a.checked===true){magicCostState=true}else{magicCostState=false;hideMagicCost()}if(typeof(Storage)!=="undefined"){localStorage.setItem("magicCost",a.checked.toString())}}function hideMagicCost(){var a=document.querySelector(".magic_cost-show");if(!!a){a.classList.remove("magic_cost-show")}}function refleshPublicHidden(){var a=document.getElementById("swPublicHidden");var b=document.querySelectorAll(".public_hidden");var c;if(a.checked===true){for(c=0;c<b.length;c++){b[c].classList.add("public_hidden-show")}}else{for(c=0;c<b.length;c++){b[c].classList.remove("public_hidden-show")}}if(typeof(Storage)!=="undefined"){localStorage.setItem("publicHidden",a.checked.toString())}}function getUrlVars(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d}function setWebViewMode(){document.getElementById("btnAndroidApp").style.display="none";document.getElementById("btnFullScreen").style.display="none";document.getElementById("ad").style.display="none"}function headerShadowEvent(){window.addEventListener("scroll",function(){var a=kigui.layout.header.getElement();if(document.body.scrollTop!==0){if(!a.classList.contains("kigui-l-h_s")){a.classList.add("kigui-l-h_s")}}else{if(a.classList.contains("kigui-l-h_s")){a.classList.remove("kigui-l-h_s")}}})}function openMenu(){var a=document.getElementById("pageCover");kigui.layout.sidemenu.show();a.style.display="block";document.body.style.overflowY="hidden"}function closeMenu(){var a=document.getElementById("pageCover");kigui.layout.sidemenu.hide();a.style.display="";document.body.style.overflowY=""}function enableFullScreen(){if(fullScreenState===false){var a=document.documentElement;if(a.requestFullscreen){a.requestFullscreen()}else{if(a.webkitRequestFullscreen){a.webkitRequestFullscreen()}else{if(a.mozRequestFullscreen){a.mozRequestFullscreen()}else{if(a.msRequestFullscreen){a.msRequestFullscreen()}}}}}}function disableFullScreen(){if(fullScreenState===true){var a=document;if(a.exitFullscreen){a.exitFullscreen()}else{if(a.cancelFullScreen){a.cancelFullScreen()}else{if(a.webkitCancelFullScreen){a.webkitCancelFullScreen()}else{if(a.mozCancelFullScreen){a.mozCancelFullScreen()}else{if(a.msExitFullscreen){a.msExitFullscreen()}}}}}}}function fullScreenEvent(){if(fullScreenState===false){document.querySelector("#btnFullScreen > i").innerHTML="&#xE5D1;";fullScreenState=true}else{document.querySelector("#btnFullScreen > i").innerHTML="&#xE5D0;";fullScreenState=false}console.log(fullScreenState)}function loadSettings(){if(typeof(Storage)!=="undefined"){var a=localStorage.getItem("rankColor");var b=localStorage.getItem("debuff");var d=localStorage.getItem("magicCost");var c=localStorage.getItem("publicHidden");if(a!==null){document.getElementById("swRankColor").checked=(a==="true")}else{document.getElementById("swRankColor").checked=true}if(b!==null){document.getElementById("swDebuff").checked=(b==="true")}else{document.getElementById("swDebuff").checked=false}if(d!==null){document.getElementById("swMagicCost").checked=(d==="true")}else{document.getElementById("swMagicCost").checked=false}if(c!==null){document.getElementById("swPublicHidden").checked=c==="true"}else{document.getElementById("swPublicHidden").checked=false}}refleshRankColor();refleshDebuff();refleshMagicCost();refleshPublicHidden()};