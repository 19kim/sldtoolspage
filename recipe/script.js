var magicCostState,fullScreenState=!1,isWebView="webview"===getUrlVars().mode;function showMagicCostEvent(){var e,t=document.querySelectorAll("tbody>tr");for(e=0;e<t.length;e++)t[e].addEventListener("click",function(){if(!0===magicCostState){hideMagicCost();var e=this.querySelector(".magic_cost");e&&e.classList.add("magic_cost-show")}})}function addTableEvent(){for(var e=document.querySelectorAll("#tables tbody > tr"),t=0;t<e.length;t++)e[t].addEventListener("dblclick",function(){this.classList.toggle("bookmark")})}function refleshRankColor(){var e,t=document.getElementById("swRankColor"),n=document.querySelectorAll("#tables span");if(!0===t.checked)for(e=0;e<n.length;e++)n[e].style.color="";else for(e=0;e<n.length;e++)n[e].style.color="#DCDCDC";"undefined"!=typeof Storage&&localStorage.setItem("rankColor",t.checked.toString())}function refleshMagicCost(){var e=document.getElementById("swMagicCost");!0===e.checked?magicCostState=!0:(magicCostState=!1,hideMagicCost()),"undefined"!=typeof Storage&&localStorage.setItem("magicCost",e.checked.toString())}function hideMagicCost(){var e=document.querySelector(".magic_cost-show");e&&e.classList.remove("magic_cost-show")}function refleshPublicHidden(){var e,t=document.getElementById("swPublicHidden"),n=document.querySelectorAll(".public_hidden");if(!0===t.checked)for(e=0;e<n.length;e++)n[e].classList.add("public_hidden-show");else for(e=0;e<n.length;e++)n[e].classList.remove("public_hidden-show");"undefined"!=typeof Storage&&localStorage.setItem("publicHidden",t.checked.toString())}function getUrlVars(){for(var e,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),l=0;l<n.length;l++)e=n[l].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function setWebViewMode(){document.getElementById("btnAndroidApp").style.display="none",document.getElementById("btnFullScreen").style.display="none",document.getElementById("ad").style.display="none"}function headerShadowEvent(){window.addEventListener("scroll",function(){var e=kigui.layout.header.getElement();0!==document.body.scrollTop?e.classList.contains("kigui-l-h_s")||e.classList.add("kigui-l-h_s"):e.classList.contains("kigui-l-h_s")&&e.classList.remove("kigui-l-h_s")})}function openMenu(){var e=document.getElementById("pageCover");kigui.layout.sidemenu.show(),e.style.display="block",document.body.style.overflowY="hidden"}function closeMenu(){var e=document.getElementById("pageCover");kigui.layout.sidemenu.hide(),e.style.display="",document.body.style.overflowY=""}function enableFullScreen(){if(!1===fullScreenState){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullscreen?e.mozRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}function disableFullScreen(){if(!0===fullScreenState){var e=document;e.exitFullscreen?e.exitFullscreen():e.cancelFullScreen?e.cancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}}function fullScreenEvent(){fullScreenState=!1===fullScreenState?(document.querySelector("#btnFullScreen > i").innerHTML="&#xE5D1;",!0):!(document.querySelector("#btnFullScreen > i").innerHTML="&#xE5D0;"),console.log(fullScreenState)}function loadSettings(){if("undefined"!=typeof Storage){var e=localStorage.getItem("rankColor"),t=localStorage.getItem("magicCost"),n=localStorage.getItem("publicHidden");document.getElementById("swRankColor").checked=null===e||"true"===e,document.getElementById("swMagicCost").checked=null!==t&&"true"===t,document.getElementById("swPublicHidden").checked=null!==n&&"true"===n}refleshRankColor(),refleshMagicCost(),refleshPublicHidden()}window.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("tables");e.innerHTML=unitNameFormatting(e.innerHTML),loadSettings(),showMagicCostEvent(),addTableEvent(),document.getElementById("btnSideMenu").addEventListener("click",kigui.layout.sidemenu.eventMenuOpen);var t=kigui.layout.others.pageCover.getElement();if(t.addEventListener("click",kigui.layout.sidemenu.eventMenuClose),t.addEventListener("mousewheel",kigui.layout.sidemenu.eventMenuClose),t.addEventListener("touchmove",kigui.layout.sidemenu.eventMenuClose),headerShadowEvent(),document.getElementById("swRankColor").addEventListener("change",refleshRankColor),document.getElementById("swMagicCost").addEventListener("change",refleshMagicCost),document.getElementById("swPublicHidden").addEventListener("change",refleshPublicHidden),!1===isWebView){var n=document.getElementById("btnFullScreen");n.addEventListener("click",enableFullScreen),n.addEventListener("click",disableFullScreen),document.addEventListener("webkitfullscreenchange",fullScreenEvent)}else setWebViewMode()});